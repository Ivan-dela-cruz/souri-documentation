(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinSaveButtonCommon"],{DzJC:function(e,t,i){var n=i("sEfC"),a=i("GoyQ"),s="Expected a function";e.exports=function(e,t,i){var o=!0,r=!0;if("function"!=typeof e)throw new TypeError(s);return a(i)&&(o="leading"in i?!!i.leading:o,r="trailing"in i?!!i.trailing:r),n(e,t,{leading:o,maxWait:t,trailing:r})}},Ev07:function(e,t,i){var n=i("1inl"),a=i("UTsl"),s=i("Ye/N"),o=i("mBfy");const r={checkFbTimelinePermission:function(e){a.default.ensureInit((function(t){t.api("/me/permissions",t=>{const i=t.data;let n=!1;if(i){n=!!i.find(e=>"publish_actions"===e.permission&&"granted"===e.status)}n?e.success&&e.success():e.error&&e.error()})}),o.default)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const i=e.getAuthResponse();return!i||t===i.userID},maybeRequestFbTimelinePermission:function(e,t){a.default.ensureInit(i=>{if(!r.fbConnectedAccountMatchesLoggedInAccount(i,t))return n.a.showError(s.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),e.error&&e.error(),void(e.complete&&e.complete());r.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){r.fbLogin(e)}})},o.default)},fbLogin:function(e){a.default.ensureInit(t=>{t.login(t=>{t.authResponse?r.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()},{scope:"publish_actions"})},o.default)},getLocaleString:function(e){let t=e;switch(t=t.replace(/-/g,"_")){case"de":t="de_DE";break;case"fr":t="fr_FR";break;case"it":t="it_IT";break;case"ja":t="ja_JP";break;case"nl":t="nl_NL";break;case"tr":t="tr_TR";break;case"en_AU":t="en_US"}return t.startsWith("es")&&(t="es_LA"),t.startsWith("ar")&&(t="ar_AR"),t}};t.a=r},PNKV:function(e,t,i){},WnNx:function(e,t,i){function n(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function a(){return{type:"HIDE_REPIN_ANIMATION"}}function s(){return{type:"SHOW_USECASE_FLYOUT"}}function o(){return{type:"HIDE_USECASE_FLYOUT"}}i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a})),i.d(t,"d",(function(){return s})),i.d(t,"b",(function(){return o}))},dMCU:function(e,t,i){i.d(t,"a",(function(){return c}));var n=i("q1tI"),a=i.n(n),s=i("/MKj"),o=i("v/Q4"),r=i("+PUW");function c(e){const t=t=>{const i=Object(s.useDispatch)(),{isAuth:n,isLimitedLogin:c}=Object(o.a)(),l=!n||c?e=>e=>{e&&e.stopPropagation(),i(r.b)}:e=>e;return a.a.createElement(e,Object.assign({authAction:l,dispatch:i,isAuth:n,isLimitedLogin:c},t))};return t.displayName=`WithAuthenticatedAction(${String(e.displayName||e.name)})`,t}},jZhD:function(e,t,i){i.d(t,"a",(function(){return o}));var n=i("q1tI"),a=(i("17x9"),i("pdBG"));function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends n.Component{constructor(...e){super(...e),s(this,"searchCache",Object.create(null)),s(this,"lastSearchedQuery",null),s(this,"search",e=>{this.lastSearchedQuery=e,e in this.searchCache?this.props.onTypeaheadSuggestionsChange(this.searchCache[e],e):this.provider.search(e,({items:t})=>{this.searchCache[e]=t,e===this.lastSearchedQuery&&this.props.onTypeaheadSuggestionsChange(t,e)})})}componentDidMount(){const e=this.props.resourceOptions||{};this.provider=new a.a({resource_name:this.props.resourceName,...e});const{value:t}=this.props;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}componentDidUpdate(e){const{value:t}=this.props;null!=t&&t!==e.value&&this.search(t)}render(){return this.props.children||null}}s(o,"defaultProps",{resourceName:"TypeaheadResource"})},lm6u:function(e,t,i){var n=i("q1tI"),a=i.n(n),s=i("/MKj"),o=i("1inl"),r=i("3z7j"),c=i("ajUs"),l=i("Ye/N");var d=i("TN0d"),u=i("eOdZ"),h=i("G35+"),p=i("CvCA"),m=i("Wrea"),b=i("ANjH"),_=i("Vzit"),f=i("WnNx"),v=i("n6mq"),g=i("U4JR"),S=i("NjDU"),C=i("C0mq"),T=i("6G9P"),y=i("B6Tf"),P=i("oTtT"),O=i("nGHF"),w=i("oN2T");function k(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return R}));const E=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi,j="236x";class D extends a.a.Component{constructor(...e){super(...e),k(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.props.showCreate?l.a._("Create board","Repin title for making a new board","Repin title for making a new board"):l.a._("Choose board","Repin title for choosing a board","Repin title for choosing a board")||"",pinDescription:this.props.pin&&this.props.pin.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),k(this,"unmounted",!1),k(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),k(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),k(this,"close",()=>{const{onClose:e,boardPickerStopwatch:t}=this.props;e&&e(),t&&t.abort("boardPickerClose"),Object(g.a)(2502,{component:5,element:610})}),k(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),k(this,"getPinResource",(e,t,i)=>{var n;const{color:a,location:s,pin:o,method:r,guid:l,additionalCreateFields:d,advertiser_id:h,previousHistory:p}=this.props;let m;o.id&&(m=Object(c.a)(o,s,p)||`${o.tracking_params}~0`);const b=o.id?"RepinResource":"PinResource",_=!o.id&&o.image_url?Object(T.b)(o.image_url,o.link):(null===(n=o.images.orig)||void 0===n?void 0:n.url)||"",f={...d,board_id:t||"",color:a||"",clientTrackingParams:m,description:this.state.pinDescription,guid:l||"",link:o.link,image_base64:o.image_base64,image_url:_,is_buyable_pin:!1,is_removable:o.promoted_is_removable,media_upload_id:o.media_upload_id,method:r||"",pin_id:o.id||"",section:i,title:o.title||"",...h?{advertiser_id:h}:{}};if(!e){const{facebook:e,twitter:t}=this.state.sharing;f.share_facebook=e,f.share_twitter=t}return u.a.create(b,f)}),k(this,"triggerPubSubs",e=>{d.a.instance.publish("currentUser","pinCreated",e),d.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),k(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((i,n)=>{e.then(e=>t?n({isCanceled:!0}):i(e)),e.catch(e=>n(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}),k(this,"handleLogToastClick",()=>{Object(g.a)(101,{component:20,view:52})}),k(this,"showSuggestedBoardToast",(e,t,i,n)=>{const{toastManagerContext:s,shouldShowToast:o}=this.props;if(o&&e){const{name:t,url:i,image_thumbnail_url:n}=e;s.showOneToast(({onHide:e})=>a.a.createElement(p.a,{duration:y.a,onHide:e,text:a.a.createElement(a.a.Fragment,null,a.a.createElement(v.R,{color:"white"},l.a._("You might also like","Post repin suggested board","Post repin suggested board")),a.a.createElement(v.R,{color:"white",weight:"bold"},t)),href:i,imageUrl:n,onClick:this.handleLogToastClick}))}}),k(this,"showBoardSavedToast",(e,t)=>{const{toastManagerContext:i}=this.props;i.showToast(({onHide:i})=>a.a.createElement(p.a,{duration:y.a,onHide:i,text:Object(T.a)(e.name,t),href:t?`${e.url}${t.slug}`:e.url,imageUrl:e.image_cover_url,onClick:this.handleLogToastClick}))}),k(this,"dismissModal",e=>{const{resolve:t,newPin:i}=this.state;t&&t(i)}),k(this,"fetchBoardRecommendation",e=>{return u.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(e=>Promise.resolve(e.resource_response.error?null:e.resource_response.data[0]))}),k(this,"handleBoardSaveSuccess",(e,t,i,n)=>{const{action:a,dispatch:s,hideSuccessAnimation:o,homeTakeoverExperience:c,pin:d,setCompletionPromise:u,shouldShowToast:h,viewerUserId:p}=this.props;s(Object(_.d)());const b=this.makeCancelablePromise(new Promise((r,d)=>{const u=e.resource_response.data;this.triggerPubSubs(u);const p=this.state.pinDescription.match(E)||[];p.length>0&&Object(g.a)(2,{element:10273,hashtags:JSON.stringify(p),objectId:this.props.pin.id});const m=o?()=>{}:()=>{h&&this.showBoardSavedToast(t,i),this.safeSetState({displaySuccessAnimation:!0,modalTitle:l.a._("Board created","Modal title after creating a new board","Modal title after creating a new board"),newPin:u,resolve:r})};"repin"===a?(this.fetchBoardRecommendation(u).then(e=>{this.showSuggestedBoardToast(e,u,i,n)}),n?m():r(u)):("create"===a&&c&&500840===c.experience_id&&(s(function(e){return{type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:e}}}(!0)),Object(g.a)(7510,{component:13233})),n?m():r(u))}));if(n||s(Object(f.c)(d.id)),u(b),s(Object(w.d)(t)),s(Object(m.d)({boardId:t.id,sectionId:i&&i.id,increment:1})),p&&(s(Object(S.b)({userId:p,increment:1})),s(Object(_.d)())),i||!t.image_cover_url){const{image_url:e,images:i}=d;t.image_cover_url=e||i&&i[j]&&i[j].url||"",s(Object(w.e)({},t))}i&&s(Object(r.a)(i.id)),s(function(e,t,i,n,a){return{type:"PIN_SAVE",payload:{pinId:e,saved:t,boardId:i,title:n,url:a}}}(d.id,!0,t.id,t.name,t.url))}),k(this,"handleSaveToBoard",(e,t,i)=>{const{boardPickerStopwatch:n,onToggleModal:a,shouldShowToast:s}=this.props;n&&n.abort("boardPickerSubmit"),s&&!i&&(this.close(),this.showBoardSavedToast(e,t));const r="secret"===(e.privacy||""),c={board:t?t.id:e.id,state:y.c.LOADING};this.safeSetState({boardSavedTo:c},()=>{this.getPinResource(r,e.id,(t||{}).id).callCreate({showError:!1}).then(n=>{this.safeSetState({boardSavedTo:Object.assign(c,{state:y.c.SUCCESS})},()=>this.handleBoardSaveSuccess(n,e,t,i)),a&&!i&&a(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),o.a.showError(e.message_detail||e.message);const t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),a&&a(!1)})})}),k(this,"handleSocialConnectSet",(e,t)=>{const i=Object.assign({},this.state.sharing);e===h.a.FACEBOOK?i.facebook=t:e===h.a.TWITTER&&(i.twitter=t),this.safeSetState({sharing:i})}),k(this,"handleNewBoardAnimationCompletion",()=>{const{dispatch:e,pin:t}=this.props;e(Object(f.c)(t.id))})}UNSAFE_componentWillReceiveProps(e){const{boardWithSection:t,showCreate:i}=this.props;this.safeSetState({pinDescription:e.pin&&e.pin.description||e.description||""}),t&&i?this.setModalTitle(l.a._("Create section","modal title for create section pane","modal title for create section pane")):t&&!i&&this.setModalTitle(l.a._("Choose section","modal title for choose section","modal title for choose section"))}componentWillUnmount(){this.unmounted=!0}render(){const{close:e,dismissModal:t,handleNewBoardAnimationCompletion:i,handleSaveToBoard:n,handleSocialConnectSet:a,setModalTitle:s,updateDescription:o}=this,{boardSavedTo:r,displaySuccessAnimation:c,modalTitle:l,newPin:d}=this.state,{color:u,pin:h}=this.props;return this.props.children({boardSavedTo:r,color:u,dismissModal:t,displaySuccessAnimation:c,handleAbort:e,handleNewBoardAnimationCompletion:i,handleSaveToBoard:n,handleSocialConnectSet:a,modalTitle:l,newPin:d,pin:h,setModalTitle:s,updateDescription:o})}}const R=Object(b.compose)(Object(s.connect)(e=>{const{advertiser:t,viewer:i,history:n}=e,a=i.isAuth&&t&&t.owner_user_id!==i.id?t.id:null,s=e.experiences.eligibleExperiences[11],o=e.experiences.eligibleExperiences[33];return{homeTakeoverExperience:s,previousHistory:n.previous,repinTakeoverExperience:o,...a?{advertiser_id:a}:{},...i.isAuth?{viewerUserId:i.id}:{}}}),O.c,C.a)((function(e){const t=Object(P.b)();return a.a.createElement(D,Object.assign({},e,{boardPickerStopwatch:t}))}))},oTtT:function(e,t,i){i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return c}));var n=i("FZ8N"),a=i("j0Fm");const{Provider:s,useHook:o}=Object(a.a)({name:"board_picker",v2LoggerMetricName:16,sampleRate:n.b?1:.1}),r=s,c=o},pdBG:function(e,t,i){var n=i("AHhP"),a=i.n(n);const s=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},o=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};o.prototype.set=function(e,t){let i=this._uidToData[e];i||(i=new s(e,t),this._uidToData[e]=i,this._numItems+=1),this._moveToFront(i),this._numItems>this._maxNumItems&&this._evict()},o.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},o.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},o.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},o.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var r=o,c=i("eOdZ"),l=i("mBfy");const d=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;const t={tags:e.tags,pin:e.pin_id},i=e.num_places;i?t.num_places=i:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope),e.suggestion_type&&(t.suggestion_type=e.suggestion_type);let n="TypeaheadResource";e.resource_name&&(n=e.resource_name),this.searchResource=c.a.create(n,t),this.itemsCache=new r};Object.assign(d.prototype,a.a),Object.assign(d.prototype,{search(e,t){let i;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&l.default.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&l.default&&l.default.isAuthenticated())i="recent_search";else{const i=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(i){const n=i.items;if(n&&n.length){this.abortSearch();const a=i.hint;return void this.publishData(e,n,a,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,i,t):this.publishData(e,[],{},t)},getResource(){return this.searchResource},abortSearch(){this.getResource().abort()},publishData(e,t,i,n){const a={term:e,items:t,hint:i};this.trigger("data",a),n&&n(a)},setAutocompleteScope(e){this.getResource().set("autocompleteScope",e)},fetch(e,t,i){const n=this.getResource();if(n.isCalling()){const t=n.get("term");if(e===t)return;this.abortSearch()}""!==this.tags&&(n.set("term",e),n.set("tags",t||this.tags),n.resetBookmark(),n.callGet({showError:!1}).then(t=>{const n=t.resource_response.data,a=n.items,s=n.hint||{},o={hint:s,items:a};this.cacheData(e,o),this.publishData(e,a,s,i)},e=>{this.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm(e){this.itemsCache.remove(e)},cacheData(e,t){this.itemsCache.set(e,t)},prefetch(){if(this.warm)return;c.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0}});t.a=d},rO08:function(e,t,i){i.r(t),i.d(t,"PinSaveButton",(function(){return y}));var n=i("q1tI"),a=i.n(n),s=i("/MKj"),o=i("Ye/N"),r=i("TiQD"),c=i("rYoy"),l=i("dMCU"),d=i("2qKt"),u=i("n6mq"),h=i("0nTG"),p=i("lm6u"),m=i("y9Ij"),b=i("C0mq"),_=i("B6Tf"),f=i("oTtT"),v=i("pLLR"),g=i("ANjH");function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const C=Object(n.lazy)(()=>i.e("FirstPinCreateCommon").then(i.bind(null,"kj35"))),T=[500639,11022];class y extends n.Component{constructor(e){super(e),S(this,"componentWillUnmount",()=>{this._repinCompletionPromise&&this._repinCompletionPromise.cancel()}),S(this,"setCompletionPromise",e=>{this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(()=>{this.handleRepinHideAndToggle()})}),S(this,"_repinCompletionPromise",null),S(this,"handleRepinHide",()=>{this.setState({isRepinModalOpen:!1})}),S(this,"handleRepinHideAndToggle",()=>{this.setState({isRepinModalOpen:!1});const{onToggleModal:e}=this.props;e&&e(!1)}),S(this,"handleSaveButtonClick",this.props.authAction(e=>{e&&(e.preventDefault(),e.stopPropagation());const{onClickCallback:t,onToggleModal:i,oneTapSave:n,boardPickerStopwatch:a}=this.props;t&&t(),n?n.saved||"function"!=typeof n.save||n.save():(a&&a.start(),i&&i(!0),this.setState({isRepinModalOpen:this.props.isAuth}))})),S(this,"handleSavedButtonClick",()=>{const{history:e,pin:t,pinSavedInfo:i,viewerId:n}=this.props;let a;t.pinner.id===n?a=t.board.url:i&&(a=i.url),a&&e.push(a)}),S(this,"saveButtonRef",Object(n.createRef)()),S(this,"renderPinToBoardRepin",()=>{const{isCloseupPin:e,onToggleModal:t,pin:i}=this.props,{isFPE:n,isRepinModalOpen:s}=this.state;return s&&n?this.renderFPE():n?null:a.a.createElement(p.a,{action:"repin",additionalCreateFields:{is_stl_pin:Object(h.g)(i)},onClose:this.handleRepinHide,setCompletionPromise:this.setCompletionPromise,shouldShowToast:!0,onToggleModal:t,pin:i},({dismissModal:n,displaySuccessAnimation:o,handleAbort:r,handleNewBoardAnimationCompletion:c,handleSocialConnectSet:l,handleSaveToBoard:d,newPin:u,updateDescription:h,modalTitle:p,setModalTitle:m})=>a.a.createElement(_.b,{dismissModal:n,displaySuccessAnimation:o,handleSocialConnectSet:l,handleSaveToBoard:d,anchorRef:this.saveButtonRef.current,handleAbort:r,handleNewBoardAnimationCompletion:c,newPin:u,isCloseupPin:e,isInModal:!0,onToggleModal:t,pin:i,pwtAuxData:{pin_create_method:"repin"},modalTitle:p,setModalTitle:m,shouldRenderContent:s,updateDescription:h}))});const{experience:t,showRepinOnInitialRender:i}=e;this.state={isFPE:!!t&&T.includes(t.experience_id),isRepinModalOpen:i||!1}}componentDidMount(){const{onMount:e}=this.props;e&&e()}shouldComponentUpdate(e,t){return!this.isFPERemoved(e)}isFPERemoved(e){const{isFPE:t}=this.state,{experience:i}=e;return t&&(!i||!T.includes(i.experience_id))}renderFPE(){const{completePinSave:e,experience:t,pin:i}=this.props;return a.a.createElement(r.b,{accessibilityModalLabel:o.a._("Create board","Accessible create board education modal label","Accessible create board education modal label"),heading:o.a._("Create board","Create board education modal label","Create board education modal label"),onDismiss:this.handleRepinHideAndToggle,size:"lg"},a.a.createElement(u.d,{dangerouslySetInlineStyle:{__style:{marginBottom:64}}},a.a.createElement(c.a,null,a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,{anchorRef:this.saveButtonRef.current,experience:t,isInModal:!0,onClose:this.handleRepinHideAndToggle,onComplete:e,pin:i,pwtAuxData:{pin_create_method:"repin"}})))))}render(){const{icon:e,iconOnly:t,isCloseupPin:i,oneTapSave:s,pin:o,renderPinSaveTooltip:r,requestContext:c,variant:l,viewerId:d}=this.props,h=!!(o.pinner.id===d||o.saved||o.savedInfo||"controlled"===(null==s?void 0:s.type)&&s.saved),p="controlled"===(null==s?void 0:s.type)?"controlled":"classic";return a.a.createElement(n.Fragment,null,a.a.createElement(u.d,{ref:this.saveButtonRef},i?a.a.createElement(m.a,{icon:e,iconOnly:t,isCloseupPin:i,isPulsarDisplayed:!this.state.isRepinModalOpen,onClick:this.handleSaveButtonClick,onSavedClick:this.handleSavedButtonClick,requestContext:c,saveButtonType:p,saved:h,variant:l}):a.a.createElement(m.b,{icon:e,iconOnly:t,isCloseupPin:i,onClick:this.handleSaveButtonClick,onSavedClick:this.handleSavedButtonClick,requestContext:c,saveButtonType:p,saved:h,variant:l}),this.renderPinToBoardRepin()),!!r&&this.saveButtonRef.current&&r(this.saveButtonRef.current))}}S(y,"defaultProps",{anchorString:""}),t.default=Object(g.compose)(Object(s.connect)((function({pins:e,viewer:t},{pin:i}){return{email:t.isAuth?t.email:void 0,isAuth:t.isAuth,pinSavedInfo:e[i.id]&&e[i.id].savedInfo,viewerId:t.isAuth?t.id:""}}),(function(e){return{completePinSave:()=>e({type:"COMPLETE_PIN_SAVE"})}})),l.a,Object(d.a)(33),b.a,v.e)((function(e){const t=Object(f.b)();return a.a.createElement(y,Object.assign({},e,{boardPickerStopwatch:t}))}))},w70y:function(e,t,i){i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return m}));var n=i("q1tI"),a=i.n(n),s=i("/MKj"),o=i("lSCD"),r=i.n(o),c=i("aK+E"),l=i("zLLH"),d=i("y19s"),u=i("Wer7");const h={};function p({acceptPrefetch:e,allowStale:t,enabledRouteRefresh:i,dangerouslyDisableFetch:a,options:o,name:r,headers:p}){const m=Object(s.useDispatch)(),b=Object(c.a)(o),_=Object(n.useRef)(),f=e=>(e[r]||h)[b]||h,{isPrefetch:v,nextBookmark:g,prefetchHasBeenRead:S}=Object(s.useSelector)(({resources:e})=>f(e.data)),C=Object(s.useSelector)(({resources:e})=>f(e.data).data),T=Object(s.useSelector)(({resources:e})=>f(e.data).error),y=Object(s.useSelector)(({resources:e})=>Boolean((e.fetching[r]||h)[b])),P=Object(s.useSelector)(({resources:e})=>Boolean((e.data[r]||h)[b])),{history:O}=Object(d.b)(),w=O&&"POP"!==O.action,k=Boolean(P&&i&&w&&!a),[E,j]=Object(n.useState)(k);void 0===_.current&&P&&w&&e&&v&&!S&&!a&&m(Object(u.h)(r,o));const D=Object(n.useCallback)(()=>{a||m(Object(u.a)(r,o,p))},[a,m,p,r,b]),R=Object(n.useCallback)(()=>{a||m(Object(u.d)(r,o,p))},[a,p,r,b]),B=Object(n.useCallback)(()=>{a||(D(),j(!0))},[a,D,j]),A=Object(n.useRef)({data:void 0,error:void 0,fetchMore:R,isAtEnd:!1,isFetching:!1,isLoaded:!1,isPrefetch:void 0,isRefreshing:!1,nextBookmark:void 0,prefetchHasBeenRead:void 0,refreshData:B});Object(n.useEffect)(()=>{!1!==t&&P&&!k||D()},[]),Object(n.useEffect)(()=>{void 0!==_.current&&b!==_.current&&w&&D(),_.current=b},[b]);const x={data:C,error:T,fetchMore:R,isAtEnd:P&&!y&&g===l.a,isFetching:y,isLoaded:P,isPrefetch:v,isRefreshing:E,nextBookmark:g,prefetchHasBeenRead:S,refreshData:B};return Object(s.shallowEqual)(x,A.current)||(!E||k||Object(s.shallowEqual)(x.data,A.current.data)||(x.isRefreshing=!1,j(!1)),A.current=x),A.current}function m(e){const t=e.key;return function(i){function n(n){const{dangerouslyDisableFetch:s,options:o,key:c,...l}=e,d=p({...l,options:(r()(o)?o(n):o)||{},dangerouslyDisableFetch:!!s&&s(n)}),u={[t]:d};return a.a.createElement(i,Object.assign({},n,u))}return n.displayName=`withResourceExperimental[${e.name}](${i.displayName||i.name||""})`,n.WrappedComponent=i,n}}},y9Ij:function(e,t,i){i.d(t,"b",(function(){return m})),i.d(t,"a",(function(){return b}));var n=i("q1tI"),a=i.n(n),s=(i("PNKV"),i("TSYQ")),o=i.n(s),r=i("Ye/N"),c=i("n02X"),l=i("/5zs"),d=i("n6mq");function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h=32,p=13;class m extends a.a.PureComponent{constructor(...e){super(...e),u(this,"handleKeyPress",e=>{e.charCode!==h&&e.charCode!==p||(e.preventDefault(),this.props.onClick(e))})}render(){const{disabled:e,iconOnly:t,isCloseupPin:i,onClick:n,onSavedClick:s,requestContext:c,saveButtonType:u,saved:h,variant:p}=this.props;if(h&&"controlled"===u)return a.a.createElement(d.e,{disabled:!0,text:r.a._("Saved"),size:"sm"});if(h&&"classic"===u&&i&&c){const e=new l.b(c,"web_save_to_saved");if(e.check("enabled")||e.check("enabled_board"))return a.a.createElement(d.e,{accessibilityLabel:r.a._("Saved button","saveButton.saved.label","Saved state label on save button"),text:r.a._("Saved!","saveButton.saved","Saved state text on save button"),size:"md",color:"white",onClick:e.check("enabled_board")?s:({event:e})=>n(e)})}return t?a.a.createElement("div",{"data-test-id":"SaveButton"},a.a.createElement(d.r,{accessibilityLabel:r.a._("Save","Accessibility label for the save button","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:({event:e})=>n(e),iconColor:"darkGray"})):a.a.createElement("div",{className:o()("SaveButton",e?"SaveButton--disabled":"SaveButton--enabled",{"SaveButton--lego":"lego"===p}),"data-test-id":"SaveButton",onClick:e?void 0:n,onKeyPress:e?void 0:this.handleKeyPress,role:"button",tabIndex:"0"},a.a.createElement("div",{className:o()("SaveButton__background",e?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===p})},a.a.createElement(d.d,{alignItems:"center",minHeight:40,dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},display:"flex"},a.a.createElement(d.R,{color:e?"gray":"white",size:"lego"===p?"sm":"md",weight:"bold"},a.a.createElement("span",{className:o()("SaveButton__label",{"SaveButton__label--lego":"lego"===p})},r.a._("Save","Pin save button label","Pin save button label"))))))}}u(m,"defaultProps",{disabled:!1,icon:!0,saveButtonType:"classic",variant:"classic"});const b=Object(c.a)(".PinActionBar .repin.pinActionBarButton")(m)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/PinSaveButtonCommon-f94ba51071db078dbed4.mjs.map